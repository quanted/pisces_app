<style>
    {#datatables font size#}
    td {
        font-size: 13px;
        vertical-align: top;
    }

    .clearButton {
        background: linear-gradient(to bottom, #efaa4a, #ec911c)
    }

    .resetButton {
        background: linear-gradient(to bottom, #898896, #898896)
    }

    table {
        border: 0px solid black;
        border-spacing: 5px;
        border-collapse: separate;
    }

    table > tbody > tr > td {
        text-align: center;
        radius: 5px;
        border: none;
        border-radius: 5px;
        box-shadow: 0px 1px 3px black;
    }

    option {
        text-align: center;
    }

    option:hover {
        background: rgba(206, 213, 222, 0.6) !important;
        cursor: pointer;
    }

    select {
        border: none;
    }
    #fishGroup {
        height: inherit;
    }

    #parameterTable {
        border-bottom: 0px solid #111;
        line-height: 1;
    }

    #parameterTable > thead > tr > th {
        border: 0px solid black;
        font-size: 10px;
        text-align: center;
        background-color: transparent;
        padding: 10px 0;
    }

    #parameterTable > tbody > tr {
        background-color: white;
    }

    #parameterTable > tbody > tr > td {
        box-shadow: none;
        font-size: 10px;
        padding: 10px 0;
    }

    #queryParameters {
        display: none;
        {#box-shadow: 0px 1px 3px 0px black;#}
        {#border-radius: 10px;#}
        padding: 10px;
        {#margin: 10px -100px;#}
    }

    #queryResults {
        box-shadow: 0px 1px 3px 0px black;
        border-radius: 10px;
        padding: 10px;
        margin: 10px -100px;
        display: none;
    }

    #queryResultsTable {
        float: left;
        width: 40%;
    }

    #fishDetailsTable {
        float: right;
        width: 60%;
    }

    #resultsTable {
        font-size: 12px;
        border: none;
        margin-right: 10px;
    }

    #resultsTable > thead > tr > th {
        border: none;
        text-align: center;
    }

    #resultsTable > tbody > tr > td {
        box-shadow: none;
        border: none;
        text-align: center;
        border-radius: 0;
    }

    #resultsTable > tbody > tr:hover {
        background: lightgrey;
        border-radius: 10px;
        cursor: pointer;
    }

    tr.selectedFish td {
        background-color: #86C1FF !important;
    }

    .fishDetails > tbody > tr > td {
        border: none;
        box-shadow: none;
        font-size: 12px;
        border-radius: 0;
    }

    .fish_links {
        display: flex;
        padding: 5px;
        font-size: 12px;
        margin-left: 10px;
    }

    .link_image {
        max-width: 25px;
        width: 100%;
        margin: 5px 5px;
    }

    table.fishDetails {
        line-height: 12px;
        width: 99%;
        border-color: black;
        border-style: solid;
        border-width: 0px;
        margin: 0 10px;
        box-shadow: 0px 1px 3px black;
        border-radius: 3px;
        border-spacing: 0px;
    }

    table.fishDetails col:nth-child(even) {
        background-color: white !important;
        width: 15%;
        min-width: 50px;
    }

    table.fishDetails col:last-child {
        width: 45%;
    }

    table.fishDetails > tbody > tr > td:nth-child(odd):hover, table.fishDetails > tbody > tr > td:nth-child(odd):hover + td {
        background: gray !important;
    }

    table.fishDetails > tbody > tr > td:hover {
        cursor: default;
    }

    .fishCName, .fishSName {
        font-size: 14px;
        text-align: center;
    }

    span.ui-slider-handle:hover {
        cursor: pointer;
    }

    .accordion-pane {
        padding: 25px;
    }

    .accordion-title {
        padding: 8px !important;
        text-align: center !important;
        font-size: 14px !important;
    }

    #taxonomyTable, #fishPropertiesTable, #habitat {
        margin-bottom: 25px;
        width: 100%;
    }
    #taxonomyTable tbody tr td {
        height: 200px;
    }

    .detailTitle {
        font-style: italic;
        background: #DBF1FF;

    }

    #queryResultMes {
        text-align: center;
        color: red;
    }

    .searchButton {
        background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB2aWV3Qm94PSIwIDAgMjg5LjEyMjIyIDI4OC4yOTYwOCIgaGVpZ2h0PSIxMnB4IiB3aWR0aD0iMTJweCI+DQo8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjYzLjQzMTIsLTM4OS42MzEyNCkiPg0KPHBhdGggc3Ryb2tlLXdpZHRoPSI5Ljc1NjE3MzEzIiBmaWxsPSIjRkZGIiBkPSJNMjk1LjkzODk5LDQyMi4wODZjLTQzLjI3Mjk5LDQzLjI3Mi00My4zNzg5OSwxMTQuMTU5LTAuMTA1OTgsMTU3LjQzMjAxLDM2LjY2Mjk5LDM2LjY2MzAyLDkzLjIwMTk5LDQyLjI1LDEzNS45MjA5OSwxNi43NjU5OWw3Ni4zNDM5OSw3NC4yMzQ5OGMxMC41MDY5OSwxMC4xOTgsMjcuMDg0OTksOS44MjEwNSwzNy4xMTY5Ny0wLjg0Mzk5LDEwLjAzMzAyLTEwLjY2NDk4LDkuNzcwMDItMjcuNDQ1OTktMC43Mzc5Ny0zNy42NDM5OGwtNzUuMTgyOTgtNzIuODY0MDJjMjYuMzYwOTktNDIuODQ2OTgsMjEuMDA3OTktMTAwLjA0NDk4LTE2LjAyODAyLTEzNy4wODA5OS00My4yNzI5OC00My4yNzMwMS0xMTQuMDU0OTktNDMuMjczMDEtMTU3LjMyNywwem0zMS43Mzg5OSwzMS43MzkwMWMyNi4xMDIwMi0yNi4xMDIwMiw2Ny43NDYwMy0yNi4xMDIwMiw5My44NDgwMiwwLDI2LjEwMTk5LDI2LjEwMTk5LDI2LjEwMTk5LDY3Ljc0NTk4LDAsOTMuODQ3OTYtMjYuMTAxOTksMjYuMTAyMDYtNjcuNzQ2LDI2LjEwMjA2LTkzLjg0ODAyLDAtMjYuMTAxOTktMjYuMTAxOTktMjYuMTAxOTktNjcuNzQ1OTcsMC05My44NDc5NnoiLz4NCjwvZz4NCjwvc3ZnPg==") !important;
        background-color: #02bfe7 !important;
        background-repeat: no-repeat;
        background-size: 15px 15px;
        background-position: 50% !important;
        border-color: #02bfe7;
        display: inline-block;
        width: 20px;
        border-radius: 5px !important;
        position: absolute;
        float: right;
        height: 40px;
        margin: 15px 0px 0px 25px !important;
        padding: 15px 25px !important;
    }

    .searchButton:hover {
        background-color: #0071bc !important;
    }

    .sectionTitle {
        text-align: center;
        font-size: 14px;
    }

    .noscroll select {
        overflow: hidden;
        scrollbar-width: none;
    }

    .noshow {
        border-color: transparent;
        border-width: 0px;
        box-shadow: none;
        width: 33%;
    }

    #resultsTable_length {
        margin-bottom: 5px !important;
        font-size: 12px !important;
    }

    #resultsTable_info {
        font-size: 12px !important;
    }

    #resultsTable_paginate {
        font-size: 10px !important;
    }

    #queryParameterTable {
        border: none;
        width: 80%;
        margin: 0 auto;
    }

    .queryTable {
        width: 100%;
        border-spacing: 0;
    }

    table.queryDetails {
        line-height: 8px;
        width: 99%;
        border: none;
        margin: 0 10px;
        box-shadow: none;
        font-size: 8px;
    }
    .tableHeader td {
        font-weight: bold;
        background: lightgray;
        border-radius: 0;
    }
    table.queryTable * {
        font-size: 11px;
        border: none;
        box-shadow: none;
        line-height: 1.0;
    }
    table.queryTable col:nth-child(even) {
        width: 15%;
        min-width: 25px;
    }


</style>


<head>

    <!-- jquery -->
{% load static %}
    <script src="{% static 'scripts/jquery-3.2.1.min.js' %}"></script>

    <!-- datatables import -->
    <link rel="stylesheet"
          href="https://www.epa.gov/sites/all/libraries/js/datatables/media/css/jquery.dataTables.min.css">
    <script src="https://www.epa.gov/sites/all/libraries/js/datatables/media/js/jquery.dataTables.min.js"></script>

    <!-- range slider -->
    <link rel="stylesheet" href="{% static 'css/jquery-ui.css' %}">
    <script src="{% static 'scripts/jquery-ui.js' %}"></script>

    <script>
        $(document).ready(function () {
            $('#resetQuery').on("click", function () {
                $('#databaseQuery')[0].reset();
                document.getElementById('fishDetailsTable').innerHTML = "";
                $('#queryParameters').hide();
                document.getElementById('queryResults').style.display = "none";

                // reset slider values
                $("#maxLengthSlider").slider("values", [1, 610]);
                $("#raritySlider").slider("values", [1, 10]);
                $("#meanWeightSlider").slider("values", [0, 7125]);
                $("#meanLengthSlider").slider("values", [1, 78]);
                $("#maxAgeSlider").slider("values", [1, 25]);

                $("#ubiquitySlider").slider("values", [0, 75]);
                $("#extentSlider").slider("values", [0, 77]);
                $("#toleranceSlider").slider("values", [0, 94]);
                $("#robustnessSlider").slider("values", [0, 47]);

                // reset slider displayed values
                $("#maxLengthValue").val($("#maxLengthSlider").slider("values", 0) + " - " + $("#maxLengthSlider").slider("values", 1));
                $("#rarityValue").val($("#raritySlider").slider("values", 0) + " - " + $("#raritySlider").slider("values", 1));
                $('#meanWeightValue').val($("#meanWeightSlider").slider("values", 0) + " - " + $("#meanWeightSlider").slider("values", 1));
                $('#meanLengthValue').val($("#meanLengthSlider").slider("values", 0) + " - " + $("#meanLengthSlider").slider("values", 1));
                $('#maxAgeValue').val($("#maxAgeSlider").slider("values", 0) + " - " + $("#maxAgeSlider").slider("values", 1));

                $("#ubiquityValue").val($("#ubiquitySlider").slider("values", 0) + " - " + $("#ubiquitySlider").slider("values", 1));
                $('#extentValue').val($("#extentSlider").slider("values", 0) + " - " + $("#extentSlider").slider("values", 1));
                $('#toleranceValue').val($("#toleranceSlider").slider("values", 0) + " - " + $("#toleranceSlider").slider("values", 1));
                $('#robustnessValue').val($("#robustnessSlider").slider("values", 0) + " - " + $("#robustnessSlider").slider("values", 1));
                return false;
            });

            $('#sciNameSubmit').on("click", function () {
                if ($('#sciName').val() === "" && $('#comName').val() === "") {
                    return false;
                }
                $('#submitQuery').trigger("click");
                return false;
            });

            $('#submitQuery').on("click", function () {
                $('#queryParameters').hide();
                document.getElementById('fishDetailsTable').innerHTML = "";
                document.getElementById('queryResults').style.display = "none";
                setTimeout(generateQuery, 200);
                generateParameterTable();
                {#var parameters = collectParameters();#}
                {#populateParameterTable(parameters);#}
                $('#queryParameters').show();
{#                document.getElementById('queryResults').style.display = "flow-root";#}
                return false;
            });

            $('#resultsTable').on("click", "td", function () {
                if ($(this).parent().hasClass('selectedFish')) {
                    $(this).parent().removeClass('selectedFish');
                    document.getElementById('fishDetailsTable').innerHTML = "";
                }
                else {
                    $("#resultsTable").find(".selectedFish").map(function (f) {
                        $(this).removeClass('selectedFish');
                    });
                    $(this).parent().addClass('selectedFish');
                    var tr = $(this).closest('tr');
                    var row = $('#resultsTable').DataTable().row(tr).data();
                    document.getElementById('fishDetailsTable').innerHTML = setFishDetails(row);
                }
            });

            $('#saveQuery').on("click", function () {
                setTimeout(saveToCSV, 300);
            });
        });

        function saveToCSV() {
            var mainHeader = "Pisces Database Query Results\nquery parameters\n";

            var metaDataHeader = "";
            var parameters = "";
            $('#parameterTable').DataTable().rows().data().map(function (r, i) {
                metaDataHeader = Object.keys(r).toString() + "\n";
                parameters += r["comname"] + "," + r["sciname"] + "," + r["groups"] + "," + r["native"] + "," + r["fishuse"] + "," +
                    r["tolerance"] + ",'" + r["rarity"] + "','" + r["maxage"] + "','" + r["meanw"] + "','" +
                    r["meanl"] + "','" + r["maxl"] + "'," + r["system"] + "," + r["wposition"] + "," +
                    r["substrate"] + "," + r["habitat"] + "," + r["wclarity"] + "," + r["thermal"] + ","
                    + r["topography"] + "\n";
            });

            var resultsHeader = "";
            var resultsData = "";
            $('#resultsTable').DataTable().rows().data().map(function (r, i) {
                resultsHeader = Object.keys(r).toString() + "\n";
                resultsData += Object.values(r).toString() + "\n";
            });

            var file_name = "pisces_database_query_results";

            var pom = document.createElement('a');
            pom.setAttribute('href', 'data:data:text/csv;charset=utf-8,' + encodeURIComponent(mainHeader + metaDataHeader + parameters + "\n" + resultsHeader + resultsData));
            pom.setAttribute('download', file_name + '.csv');
            if (document.createEvent) {
                var event = document.createEvent('MouseEvents');
                event.initEvent('click', true, true);
                pom.dispatchEvent(event);
            }
            else {
                pom.click();
            }
        }

        function generateQuery() {
            // Collecting variables
            var comname = "common_name=" + $('#comName').val().trim().split(" ").join("_") + "&";
            var sciname = "scientific_name=" + $('#sciName').val().trim().split(" ").join("_") + "&";
            var group = "group=" + $('#fishGroup').val().toString().trim().split(" ").join("_") + "&";

            var biogeo = $('#native').val().map(function (i) {
                if (i === "native_y") {
                    return "native=Y&";
                }
                else if (i === "native_n") {
                    return "native=N&"
                }
            }).toString().replace(',', '');
            var benefit = $('#fishuse').val().map(function (i) {
                return i + "=1&";
            }).toString().split(",").join("");

            var rarity = $('#rarityValue').val().split(' - ');
            rarity = "rarity=" + rarity[0] + "_" + rarity[1] + "&";
            var maxage = $('#maxAgeValue').val().split(' - ');
            maxage = "max_age=" + maxage[0] + "_" + maxage[1] + "&";
            var meanw = $('#meanWeightValue').val().split(' - ');
            meanw[1] = (meanw[1] === "500") ? "7150" : meanw[1];
            meanw = "mean_weight=" + meanw[0] + "_" + meanw[1] + "&";
            var meanl = $('#meanLengthValue').val().split(' - ');
            meanl[1] = (meanl[1] === "40") ? "78" : meanl[1];
            meanl = "mean_length=" + meanl[0] + "_" + meanl[1] + "&";
            var maxl = $('#maxLengthValue').val().split(' - ');
            maxl[1] = (maxl[1] === "200") ? "610" : maxl[1];
            maxl = "max_length=" + maxl[0] + "_" + maxl[1] + "&";

            var ubiquity = $('#ubiquityValue').val().split(' - ');
            ubiquity = "ubiquity=" + ubiquity[0] + "_" + ubiquity[1] + "&";
            var extent = $('#extentValue').val().split(' - ');
            extent = "extent=" + extent[0] + "_" + extent[1] + "&";
            var tolerance = $('#toleranceValue').val().split(' - ');
            tolerance = "tolerance=" + tolerance[0] + "_" + tolerance[1] + "&";
            var robustness = $('#robustnessValue').val().split(' - ');
            robustness = "robustness=" + robustness[0] + "_" + robustness[1] + "&";

            var sys = $('#preferedSystem').val().map(function (i) {
                return i + "=1&";
            }).toString().split(",").join("");
            var position = $('#waterPosition').val().map(function (i) {
                return i + "=1&";
            }).toString().split(",").join("");
            var substrate = $('#substrate').val().map(function (i) {
                return i + "=1&";
            }).toString().split(",").join("");
            var habitat = $('#habitatType').val().map(function (i) {
                return i + "=1&";
            }).toString().split(",").join("");
            var waterType = $('#waterType').val().map(function (i) {
                return i + "=1&";
            }).toString().split(",").join("");
            var thermal = $('#thermal').val().map(function (i) {
                return i + "=1&";
            }).toString().split(",").join("");
            var topo = $('#topography').val().map(function (i) {
                return i + "=1&";
            }).toString().split(",").join("");

            var queryString = "";
            if ($('#comName').val().length > 0) {
                queryString = queryString + comname;
            }
            if ($('#sciName').val().length > 0) {
                queryString = queryString + sciname;
            }
            if ($('#fishGroup').val().length > 0) {
                queryString = queryString + group;
            }
            if ($('#native').val().length > 0) {
                queryString = queryString + biogeo;
            }
            if ($('#fishuse').val().length > 0) {
                queryString = queryString + benefit;
            }
            if ($('#preferedSystem').val().length > 0) {
                queryString = queryString + sys;
            }
            if ($('#waterPosition').val().length > 0) {
                queryString = queryString + position;
            }
            if ($('#substrate').val().length > 0) {
                queryString = queryString + substrate;
            }
            if ($('#habitatType').val().length > 0) {
                queryString = queryString + habitat;
            }
            if ($('#waterType').val().length > 0) {
                queryString = queryString + waterType;
            }
            if ($('#thermal').val().length > 0) {
                queryString = queryString + thermal;
            }
            if ($('#topography').val().length > 0) {
                queryString = queryString + topo;
            }

            queryString = queryString + rarity + maxage + meanw + meanl + maxl + ubiquity + extent + tolerance + robustness;

            if (queryString[queryString.length - 1] === '&') {
                queryString = queryString.substring(0, queryString.length - 1);
            }
            console.log('/pisces/rest/api/v1/fish/properties?' + queryString);
            var url = "/pisces/rest/api/v1/fish/properties?" + queryString;
            document.getElementById('fishDetailsTable').innerHTML = "";
            $.ajax({
                type: "GET",
                url: url,
                success: function (data, status, jqXHR) {
                    populateFishTable(data['species']);
                    document.getElementById('queryResults').style.display = "flow-root";
                    if (data['species'].length === 0) {
                        document.getElementById('fishDetailsTable').innerHTML = "<p id='queryResultMes'>No entries found that satisfy the provided query.</p>";
                    }
                },
                error: function (jqXHR, status, errorThrown) {
                    console.log("Query Error: " + url + " " + errorThrown);
                    document.getElementById('fishDetailsTable').innerHTML = "<p id='queryResultMes'>Query submission unsuccessful.</p>";
                }
            });
        }

        function generateParameterTable(){

            var sciName = $('#sciName').val().trim();
            var comName = $('#comName').val().trim();
            var group= $('#fishGroup').val().toString().split(",").join(", ");
            var native = "";
            $('#native').val().map(function (i) {
                if (i === "native_y") {
                    native = "Native";
                }
                else if (i === "native_n") {
                   native = "Introduced";
                }
            });

            var fishUse = jQuery.makeArray($($('#fishuse')[0]["selectedOptions"]).map(function (i) {
                return this.text;
            })).toString().split(",").join(", ");

            var rarity = $('#rarityValue').val();
            var maxAge = $('#maxAgeValue').val();
            var meanWei = $('#meanWeightValue').val();
            var meanLen = $('#meanLengthValue').val();
            var maxLen = $('#maxLengthValue').val();

            var tolerance = $('#toleranceValue').val();
            var ubiquity = $('#ubiquityValue').val();
            var extent = $('#extentValue').val();
            var robustness = $('#robustnessValue').val();


            var system = jQuery.makeArray($($('#preferedSystem')[0]["selectedOptions"]).map(function (i) {
                return this.text;
            })).toString().split(",").join(", ");
            var wPosition = jQuery.makeArray($($('#waterPosition')[0]["selectedOptions"]).map(function (i) {
                return this.text;
            })).toString().split(",").join(", ");
            var substrate = jQuery.makeArray($($('#substrate')[0]["selectedOptions"]).map(function (i) {
                return this.text;
            })).toString().split(",").join(", ");
            var habitat = jQuery.makeArray($($('#habitatType')[0]["selectedOptions"]).map(function (i) {
                return this.text;
            })).toString().split(",").join(", ");
            var clarity = jQuery.makeArray($($('#waterType')[0]["selectedOptions"]).map(function (i) {
                return this.text;
            })).toString().split(",").join(", ");
            var thermal = jQuery.makeArray($($('#thermal')[0]["selectedOptions"]).map(function (i) {
                return this.text;
            })).toString().split(",").join(", ");
            var topography = jQuery.makeArray($($('#topography')[0]["selectedOptions"]).map(function (i) {
                return this.text;
            })).toString().split(",").join(", ");

            $("#queryParameterTable").html(
                '<table class="queryTable"><col><col><col><col>' +
                '<tr class="tableHeader"><td>Parameter</td><td>Value(s)</td><td>Parameter</td><td>Value(s)</td></tr>' +
                '<tr class="tableValue"><td>Common Name</td><td>' + comName + '</td><td>Ubiquity</td><td>' + ubiquity.toString() + '</td></tr>' +
                '<tr class="tableValue"><td>Scientific Name</td><td> ' + sciName + ' </td><td>Extent</td><td>' + extent.toString() + '</td></tr>' +
                '<tr class="tableValue"><td>Tribe</td><td>' + group + '</td><td>Tolerance</td><td>' + tolerance.toString() + '</td></tr>' +
                '<tr class="tableValue"><td>Biogeography</td><td>' + native + '</td><td>Robustness</td><td>' + robustness.toString() + '</td></tr>' +
                '<tr class="tableValue"><td>Beneficial Use</td><td>' + fishUse + '</td><td>System</td><td>' + system.toString() + '</td></tr>' +
                '<tr class="tableValue"><td>PFG Rarity</td><td>' + rarity + '</td><td>Water Position</td><td>' + wPosition.toString() + '</td></tr>' +
                '<tr class="tableValue"><td>Max Age (yr)</td><td>' + maxAge + '</td><td>Substrate</td><td>' + substrate.toString() + '</td></tr>' +
                '<tr class="tableValue"><td>Mean Weight (g)</td><td>' + meanWei + '</td><td>Habitat</td><td>' + habitat.toString() + '</td></tr>' +
                '<tr class="tableValue"><td>Mean Length (cm)</td><td>' + meanLen + '</td><td>Water Clarity</td><td>' + clarity.toString() + '</td></tr>' +
                '<tr class="tableValue"><td>Max Length (cm)</td><td>' + maxLen + '</td><td>Thermal Regime</td><td>' + thermal.toString() + '</td></tr>' +
                '<tr class="tableValue"><td></td><td></td><td>Topography</td><td>' + topography.toString() + '</td></tr>' +
                '</table>');
        }

        function collectParameters() {
            var parameters = {};

            parameters["sciname"] = $('#sciName').val().trim();
            parameters["comname"] = $('#comName').val().trim();
            parameters["groups"] = $('#fishGroup').val().toString().split(",").join(", ");
            parameters["native"] = "";
            $('#native').val().map(function (i) {
                if (i === "native_y") {
                    parameters["native"] = "Native";
                }
                else if (i === "native_n") {
                    parameters["native"] = "Introduced";
                }
            });

            parameters["fishuse"] = jQuery.makeArray($($('#fishuse')[0]["selectedOptions"]).map(function (i) {
                return this.text;
            })).toString().split(",").join(", ");

            parameters["rarity"] = $('#rarityValue').val();
            parameters["maxage"] = $('#maxAgeValue').val();
            parameters["meanw"] = $('#meanWeightValue').val();
            parameters["meanl"] = $('#meanLengthValue').val();
            parameters["maxl"] = $('#maxLengthValue').val();

            parameters["tolerance"] = $('#toleranceValue').val();
            parameters["ubiquity"] = $('#ubiquityValue').val();
            parameters["extent"] = $('#extentValue').val();
            parameters["robustness"] = $('#robustnessValue').val();


            parameters["system"] = jQuery.makeArray($($('#preferedSystem')[0]["selectedOptions"]).map(function (i) {
                return this.text;
            })).toString().split(",").join(", ");
            parameters["wposition"] = jQuery.makeArray($($('#waterPosition')[0]["selectedOptions"]).map(function (i) {
                return this.text;
            })).toString().split(",").join(", ");
            parameters["substrate"] = jQuery.makeArray($($('#substrate')[0]["selectedOptions"]).map(function (i) {
                return this.text;
            })).toString().split(",").join(", ");
            parameters["habitat"] = jQuery.makeArray($($('#habitatType')[0]["selectedOptions"]).map(function (i) {
                return this.text;
            })).toString().split(",").join(", ");
            parameters["wclarity"] = jQuery.makeArray($($('#waterType')[0]["selectedOptions"]).map(function (i) {
                return this.text;
            })).toString().split(",").join(", ");
            parameters["thermal"] = jQuery.makeArray($($('#thermal')[0]["selectedOptions"]).map(function (i) {
                return this.text;
            })).toString().split(",").join(", ");
            parameters["topography"] = jQuery.makeArray($($('#topography')[0]["selectedOptions"]).map(function (i) {
                return this.text;
            })).toString().split(",").join(", ");
            return parameters;
        }

        function populateParameterTable(parameters) {
            parameters = [parameters];
            $('#parameterTable').DataTable().destroy();
            $('#parameterTable').empty();
            var config = {
                data: parameters,
                "columns": [
                    {
                        title: "Common Name",
                        data: "comname"
                    },
                    {
                        title: "Scientific Name",
                        data: "sciname"
                    },
                    {
                        title: "Tribe",
                        data: "groups"
                    },
                    {
                        title: "Biogeography",
                        data: "native"
                    },
                    {
                        title: "Beneficial Use",
                        data: "fishuse"
                    },
                    {
                        title: "PFG Rarity",
                        data: "rarity"
                    },
                    {
                        title: "Max Age (yr)",
                        data: "maxage"
                    },
                    {
                        title: "Mean Weight (g)",
                        data: "meanw"
                    },
                    {
                        title: "Mean Length (cm)",
                        data: "meanl"
                    },
                    {
                        title: "Max Length (cm)",
                        data: "maxl"
                    },
                    {
                        title: "Ubiquity",
                        data: "ubiquity"
                    },
                    {
                        title: "Extent",
                        data: "extent"
                    },
                    {
                        title: "Tolerance",
                        data: "tolerance"
                    },
                    {
                        title: "Robustness",
                        data: "robustness"
                    },
                    {
                        title: "System",
                        data: "system"
                    },
                    {
                        title: "Water Position",
                        data: "wposition"
                    },
                    {
                        title: "Substrate",
                        data: "substrate"
                    },
                    {
                        title: "Habitat",
                        data: "habitat"
                    },
                    {
                        title: "Water Clarity",
                        data: "wclarity"
                    },
                    {
                        title: "Thermal Regime",
                        data: "thermal"
                    },
                    {
                        title: "Topography",
                        data: "topography"
                    }
                ],
                "columnDefs": [
                    {
                        "bSortable": false,
                        "aTargets": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17]
                    }, {
                        width: 75, targets: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17]
                    }
                ],
                sorting: false,
                searching: false,
                paging: false,
                bInfo: false
            };
            $('#parameterTable').DataTable(config);
        }

        function setFishDetails(details) {
            var cName = details["commonname"];
            var sName = details["genus"] + " " + details["species"];

            // biogeography
            var native = (details["native"] === "Y") ? "Native" : " Non-Native";

            // gradient
            var gradient = [];
            if (details["lowlands_lgr"] === "1") gradient.push(" Lowlands");
            if (details["uplands_hgr"] === "1") gradient.push(" Uplands");

            // thermal
            var thermal = [];
            if (details["warmwater"] === "1") thermal.push(" Warmwater");
            if (details["coolwater"] === "1") thermal.push(" Coolwater");
            if (details["coldwater"] === "1") thermal.push(" Coldwater");

            // clarity
            var clarity = [];
            if (details["clearwater"] === "1") clarity.push(" Clear");
            if (details["turbidwater"] === "1") clarity.push(" Turbid");

            // system
            var system = [];
            if (details["caves"] === "1") system.push(" Caves");
            if (details["springs"] === "1") system.push(" Springs");
            if (details["headwaters"] === "1") system.push(" Headwaters");
            if (details["creeks"] === "1") system.push(" Creeks");
            if (details["small_riv"] === "1") system.push(" Small Rivers");
            if (details["med_riv"] === "1") system.push(" Medium Rivers");
            if (details["lge_riv"] === "1") system.push(" Large Rivers");
            if (details["lk_imp_pnd"] === "1") system.push(" Lakes/Impoundments/Ponds/Canals/Ditches");
            if (details["swp_msh_by"] === "1") system.push(" Swamps/Marshes/Bayou");
            if (details["coast_ocea"] === "1") system.push(" Coastal/Ocean");

            // lotic habitat
            var lotic = [];
            if (details["riffles"] === "1") lotic.push(" Riffles");
            if (details["run_flopool"] === "1") lotic.push(" Runs/Flowing Pools");
            if (details["pool_bckwtr"] === "1") lotic.push(" Pools/Backwaters");

            // water column
            var column = [];
            if (details["benthic"] === "1") column.push(" Benthic");
            if (details["surface"] === "1") column.push(" Surface");
            if (details["nrshre_litt"] === "1") column.push(" Nearshore/Littoral");
            if (details["opnwtr_pelag"] === "1") column.push(" Open Water/Pelagic");

            // substrate
            var substrate = [];
            if (details["mud_slt_det"] === "1") substrate.push(" Mud/Silt/Detritus");
            if (details["sand"] === "1") substrate.push(" Sand");
            if (details["gravel"] === "1") substrate.push(" Gravel");
            if (details["rck_rub_bol"] === "1") substrate.push(" Rocks/Rubble/Boulders");
            if (details["vegetation"] === "1") substrate.push(" Vegetation");
            if (details["wdyd_brush"] === "1") substrate.push(" Woody Debris/Brush");

            // tolerance
            {#var tolerance = [];#}
            {#if (details["pollut_tol"] === "I"){tolerance.push(" Intolerant");}#}
            {#else if (details["pollut_tol"] === "T") {tolerance.push(" Tolerant");}#}
            {#else if (details["pollut_tol"] === "M") {tolerance.push(" Mid-Tolerant");}#}
            {#else if (details["pollut_tol"] === "U") {tolerance.push(" Unspecified");}#}

            // use
            var use = [];
            if (details["sportfishing"] === "1") use.push(" Sportfishing");
            if (details["nongame"] === "1") use.push(" Nongame");
            if (details["subsis_fish"] === "1") use.push(" Subsistence");

            var ubiquity = (details["ubiquity"] == null) ? "NA" : details["ubiquity"].toFixed(3);
            var extent = (details["extent"] == null) ? "NA" : details["extent"].toFixed(3);
            var tolerance = (details["tolerance"] == null) ? "NA" : details["tolerance"].toFixed(3);
            var robustness = (details["robustness"] == null) ? "NA" : details["robustness"].toFixed(3);

            // links
            var google_link = "https://www.google.com/search?tbm=isch&q=" + sName.replace(" ", "+");
            var wiki_link = "https://en.wikipedia.org/wiki/Special:Search/" + sName.replace(" ", "_");

            return '<h4 class="fishCName">' + capitalize_Words(cName) + '</h4>' + '<h5 class="fishSName">' + capitalize_Words(sName) + '</h5><p>' +
                '<table class="fishDetails"><col><col><col><col><tr><td>Tribe</td><td>' + details["group"] + '</td><td>Gradient</td><td>' + gradient.toString() + '</td></tr>' +
                '<tr><td>Max Length (cm)</td><td> ' + details["max_length"].toFixed(1) + ' </td><td>Human Use</td><td>' + use.toString() + '</td></tr>' +
                '<tr><td>Mean Weight (g)</td><td>' + details["mean_weight"].toFixed(1) + '</td><td>Biogeography</td><td>' + native + '</td></tr>' +
                '<tr><td>Mean Length (cm)</td><td>' + details["mean_length"].toFixed(1) + '</td><td>System</td><td>' + system.toString() + '</td></tr>' +
                '<tr><td>Max Age (yr)</td><td>' + details["max_age"] + '</td><td>Lotic Habitat</td><td>' + lotic.toString() + '</td></tr>' +
                '<tr><td>A (W=A*L<sup>B</sup>)</td><td>' + details["w_l_a"] + '</td><td>Water Column</td><td>' + column.toString() +'</td></tr>' +
                '<tr><td>B (W=A*L<sup>B</sup>)</td><td>' + details["w_l_b"] + '</td><td>Substrate</td><td>' + substrate.toString() + '</td></tr>' +
                '<tr><td>PFG Rarity</td><td>' + details["rarity"] + '</td><td>Water Clarity</td><td>' + clarity.toString() + '</td></tr>' +
                '<tr><td>Ubiquity</td><td>' + ubiquity + '</td><td>Thermal</td><td>' + thermal.toString() + '</td></tr>' +
                '<tr><td>Extent</td><td>' + extent + '</td><td>Habitat Notes</td><td>' + details["habit_notes"] + '</td></tr>' +
                '<tr><td>Tolerance</td><td>' + tolerance + '</td><td></td></tr>' +
                '<tr><td>Robustness</td><td>' + robustness + '</td><td></td><td></td></tr></table>' +
                '<div class="fish_links">Links for additional information on ' + capitalize_Words(cName) + ': <a href="' + google_link + '" target="_blank"><img class="link_image" src="{% static 'images/google_logo.png' %}" alt="Google Images" title="Link to Google Images"></a>' +
                '<a href="' + wiki_link + '" target="_blank"><img class="link_image" src="{% static 'images/wikipedia_logo.png' %}" alt="Wikipedia page" title="Link to Wikipedia page"></a></div>'
                ;
        }

        function populateFishTable(data) {
            $('#resultsTable').DataTable().destroy();
            $('#resultsTable').empty();
            var config = {
                data: data,
                "columns": [
                    {
                        data: "commonname",
                        title: "Common Name",
                        name: "commonname"
                    },
                    {
                        data: "species",
                        title: "Scientific Name",
                        name: "scientific_name"

                    },
                    {
                        data: "genus",
                        title: "Genus",
                        name: "genus"
                    }
                ],
                "columnDefs": [
                    {
                        "targets": [2],
                        "visible": false
                    },
                    {
                        "render": function (data, type, row) {
                            return row["genus"] + " " + data;
                        },
                        "targets": 1
                    }
                ],
                searching: false,
                paging: true,
                bInfo: true,
                "order": [[0, 'asc']]

            };
            $('#resultsTable').closest('div').show();
            $('#resultsTable').DataTable(config);
        }

        function capitalize_Words(str) {
            return str.replace(/\w\S*/g, function (txt) {
                return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
            });
        }

    </script>

</head>


<body>

<div class="panel-display panel-1col clearfix">
    <div class="panel-panel panel-col">
        <!--- content div -->
        <div class="col-md-6">
            <div class="pane-content">
                <p>Query the database by searching for species of interest. Select species properties, habitat
                    characteristics, or other features to find fish that meet your criteria.</p>

                <!--- section line -->
                <hr/>
                <form id="databaseQuery">
                    <div id="scicomFields" style="margin-bottom: 25px;">
                        <div style="display: block;text-align: center;margin: auto;">
                            <label for="sciName" style="margin-right:15px; display:unset;">Scientific Name</label>
                            <input id="sciName" name="sciName" type="text" title="Scientific Name" style="width:350px;padding-left: 5px; height: 28px;">
                            <input class="searchButton" id="sciNameSubmit" type="button" title="Search Scientific Name">
                        </div>
                        <div style="margin-bottom: 10px;"></div>
                        <div style="display: block;text-align: center;margin: auto;">
                            <label for="comName" style="margin-right:15px;display:unset;">Common Name</label>
                            <input id="comName" name="comName" type="text" title="Common Name" style="width:350px;padding-left: 5px; height: 28px;">
                        </div>

                    </div>
                    <ul class="accordion" id="accordionGroup">
                        <li>
                            <a class="accordion-title" href="#pane-3" title="Advanced search parameters">Advanced Search</a>
                            <div class="accordion-pane" id="pane-3" style="display:inline-block;overflow:hidden">
                                <h4 class="sectionTitle">Taxonomy</h4>
                                <table id="taxonomyTable" style="width:100%">
                                    <tbody>
                                    <tr>
                                        <td class="noshow"></td>
                                        <td><strong>Tribe</strong>
                                            <label for="fishGroup"></label>
                                            <select multiple id="fishGroup" title="Select one or multiple groups"
                                                    style="width: 100%;overflow: overlay;">
                                                <option value="Black Bass">Black Bass</option>
                                                <option value="Carp">Carp</option>
                                                <option value="Catfish">Catfish</option>
                                                <option value="Cavefish">Cavefish</option>
                                                <option value="Cichlid">Cichlid</option>
                                                <option value="Darter">Darter</option>
                                                <option value="Gar">Gar</option>
                                                <option value="Goby">Goby</option>
                                                <option value="Lamprey">Lamprey</option>
                                                <option value="Livebearer">Livebearer</option>
                                                <option value="Madtom">Madtom</option>
                                                <option value="Minnow">Minnow</option>
                                                <option value="Misc">Misc</option>
                                                <option value="Perch">Perch</option>
                                                <option value="Pike">Pike</option>
                                                <option value="Pupfish">Pupfish</option>
                                                <option value="Pygmy Sunfish">Pygmy Sunfish</option>
                                                <option value="Salmon and Trout">Salmon and Trout</option>
                                                <option value="Sculpin">Sculpin</option>
                                                <option value="Shad and Herring">Shad and Herring</option>
                                                <option value="Silverside">Silverside</option>
                                                <option value="Smelt">Smelt</option>
                                                <option value="Splitfin">Splitfin</option>
                                                <option value="Stickleback">Stickleback</option>
                                                <option value="Sturgeon">Sturgeon</option>
                                                <option value="Sucker">Sucker</option>
                                                <option value="Sunfish">Sunfish</option>
                                                <option value="Topminnow">Topminnow</option>
                                                <option value="White Bass">White Bass</option>
                                                <option value="Whitefish">Whitefish</option>
                                            </select>
                                        </td>
                                        <td class="noshow"></td>
                                    </tr>
                                    </tbody>
                                </table>
                                <h4 class="sectionTitle">Fish Properties</h4>
                                <table id="fishPropertiesTable" style="width:100%">
                                    <tbody>
                                    <tr>
                                        <td class="noscroll" style="width:33%; text-align: center;">
                                            <strong>Biogeography</strong>
                                            <select multiple id="native"
                                                    title="Select any options to apply to query"
                                                    size="4"
                                                    style="margin: 1px; width:100%;">
                                                <option value="native_y">Native</option>
                                                <option value="native_n">Introduced</option>
                                            </select>
                                        </td>
                                        <td class="noscroll" style="width:34%; text-align: center;"><strong>Beneficial
                                            Use</strong>
                                            <select multiple id="fishuse"
                                                    title="Select any options to apply to query"
                                                    size="4"
                                                    style="margin: 1px; width:100%;overflow: auto;">
                                                <option value="subsis_fish">Subsistence</option>
                                                <option value="sportfishing">SportFish</option>
                                                <option value="nongame">Non-Game</option>
                                            </select>
                                        </td>
                                        <td style="width:33%; text-align: center;" title="Select rarity range"><strong> PFG Rarity</strong>
                                            <input type="text" id="rarityValue" readonly
                                                   style="border:0; color:darkblue; font-weight:bold; font-size: 14px; text-align: center;">
                                            <script>
                                                $(function () {
                                                    $("#raritySlider").slider({
                                                        range: true,
                                                        min: 1,
                                                        max: 10,
                                                        values: [1, 10],
                                                        slide: function (event, ui) {
                                                            $("#rarityValue").val(ui.values[0] + " - " + ui.values[1]);
                                                        }
                                                    });
                                                    $("#rarityValue").val($("#raritySlider").slider("values", 0) +
                                                        " - " + $("#raritySlider").slider("values", 1));
                                                });
                                            </script>
                                            <div id="raritySlider" style="margin: 0 20px;"></div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width:33%; text-align: center;" title="Select max age range"><strong>Max
                                            Age (yr)</strong>
                                            <input type="text" id="maxAgeValue" readonly
                                                   style="border:0; color:darkblue; font-weight:bold; font-size: 14px; text-align: center;">
                                            <script>
                                                $(function () {
                                                    $("#maxAgeSlider").slider({
                                                        range: true,
                                                        min: 1,
                                                        max: 25,
                                                        values: [1, 25],
                                                        slide: function (event, ui) {
                                                            $("#maxAgeValue").val(ui.values[0] + " - " + ui.values[1]);
                                                        }
                                                    });
                                                    $('#maxAgeValue').val($("#maxAgeSlider").slider("values", 0) +
                                                        " - " + $("#maxAgeSlider").slider("values", 1));
                                                })
                                            </script>
                                            <div id="maxAgeSlider" style="margin: 0 20px;"></div>
                                        </td>
                                        <td style="width:33%; text-align: center;" title="Select mean weight range">
                                            <strong>Mean Weight (g)</strong>
                                            <input type="text" id="meanWeightValue" readonly
                                                   style="border:0; color:darkblue; font-weight:bold; font-size: 14px; text-align: center;">
                                            <script>
                                                $(function () {
                                                    $("#meanWeightSlider").slider({
                                                        range: true,
                                                        min: 0,
                                                        max: 500,
                                                        values: [0, 500],
                                                        slide: function (event, ui) {
                                                            $("#meanWeightValue").val(ui.values[0] + " - " + ui.values[1]);
                                                        }
                                                    });
                                                    $('#meanWeightValue').val($("#meanWeightSlider").slider("values", 0) +
                                                        " - " + $("#meanWeightSlider").slider("values", 1));
                                                })
                                            </script>
                                            <div id="meanWeightSlider" style="margin: 0 20px;"></div>
                                        </td>
                                        <td style="width:34%; text-align: center;" title="Select mean length range">
                                            <strong>Mean Length (cm)</strong>
                                            <input type="text" id="meanLengthValue" readonly
                                                   style="border:0; color:darkblue; font-weight:bold; font-size: 14px; text-align: center;">
                                            <script>
                                                $(function () {
                                                    $("#meanLengthSlider").slider({
                                                        range: true,
                                                        min: 1,
                                                        max: 40,
                                                        values: [1, 40],
                                                        slide: function (event, ui) {
                                                            $("#meanLengthValue").val(ui.values[0] + " - " + ui.values[1]);
                                                        }
                                                    });
                                                    $('#meanLengthValue').val($("#meanLengthSlider").slider("values", 0) +
                                                        " - " + $("#meanLengthSlider").slider("values", 1));
                                                })
                                            </script>
                                            <div id="meanLengthSlider" style="margin: 0 20px;"></div>
                                        </td>
                                        <td style="width:34%; text-align: center;" title="Select max length range">
                                            <strong>Max Total Length (cm)</strong>
                                            <input type="text" id="maxLengthValue" readonly style="border:0; color:darkblue; font-weight:bold; font-size: 14px; text-align: center;">
                                            <script>
                                                $(function () {
                                                    $("#maxLengthSlider").slider({
                                                        range: true,
                                                        min: 1,
                                                        max: 200,
                                                        values: [1, 200],
                                                        slide: function (event, ui) {
                                                            $("#maxLengthValue").val(ui.values[0] + " - " + ui.values[1]);
                                                        }
                                                    });
                                                    $("#maxLengthValue").val($("#maxLengthSlider").slider("values", 0) +
                                                        " - " + $("#maxLengthSlider").slider("values", 1));
                                                });
                                            </script>
                                            <div id="maxLengthSlider" style="margin: 0 20px;"></div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width:33%; text-align: center;" title="Select ubiquity range">
                                            <strong>Ubiquity</strong>
                                            <input type="text" id="ubiquityValue" readonly style="border:0; color:darkblue; font-weight:bold; font-size: 14px; text-align: center;">
                                            <script>
                                                $(function () {
                                                    $("#ubiquitySlider").slider({
                                                        range: true,
                                                        min: 0,
                                                        max: 75,
                                                        values: [0, 75],
                                                        slide: function (event, ui) {
                                                            $("#ubiquityValue").val(ui.values[0] + " - " + ui.values[1]);
                                                        }
                                                    });
                                                    $('#ubiquityValue').val($("#ubiquitySlider").slider("values", 0) +
                                                        " - " + $("#ubiquitySlider").slider("values", 1));
                                                })
                                            </script>
                                            <div id="ubiquitySlider" style="margin: 0 20px;"></div>
                                        </td>
                                        <td style="width:33%; text-align: center;" title="Select extent range">
                                            <strong>Extent</strong>
                                            <input type="text" id="extentValue" readonly style="border:0; color:darkblue; font-weight:bold; font-size: 14px; text-align: center;">
                                            <script>
                                                $(function () {
                                                    $("#extentSlider").slider({
                                                        range: true,
                                                        min: 0,
                                                        max: 77,
                                                        values: [0, 77],
                                                        slide: function (event, ui) {
                                                            $("#extentValue").val(ui.values[0] + " - " + ui.values[1]);
                                                        }
                                                    });
                                                    $('#extentValue').val($("#extentSlider").slider("values", 0) +
                                                        " - " + $("#extentSlider").slider("values", 1));
                                                })
                                            </script>
                                            <div id="extentSlider" style="margin: 0 20px;"></div>
                                        </td>
                                        <td style="width:34%; text-align: center;" title="Select tolerance range">
                                            <strong>Tolerance</strong>
                                            <input type="text" id="toleranceValue" readonly style="border:0; color:darkblue; font-weight:bold; font-size: 14px; text-align: center;">
                                            <script>
                                                $(function () {
                                                    $("#toleranceSlider").slider({
                                                        range: true,
                                                        min: 0,
                                                        max: 94,
                                                        values: [0, 94],
                                                        slide: function (event, ui) {
                                                            $("#toleranceValue").val(ui.values[0] + " - " + ui.values[1]);
                                                        }
                                                    });
                                                    $('#toleranceValue').val($("#toleranceSlider").slider("values", 0) +
                                                        " - " + $("#toleranceSlider").slider("values", 1));
                                                })
                                            </script>
                                            <div id="toleranceSlider" style="margin: 0 20px;"></div>
                                        </td>
                                        <td style="width:34%; text-align: center;" title="Select robustness range">
                                            <strong>Robustness</strong>
                                            <input type="text" id="robustnessValue" readonly style="border:0; color:darkblue; font-weight:bold; font-size: 14px; text-align: center;">
                                            <script>
                                                $(function () {
                                                    $("#robustnessSlider").slider({
                                                        range: true,
                                                        min: 0,
                                                        max: 47,
                                                        values: [0, 47],
                                                        slide: function (event, ui) {
                                                            $("#robustnessValue").val(ui.values[0] + " - " + ui.values[1]);
                                                        }
                                                    });
                                                    $("#robustnessValue").val($("#robustnessSlider").slider("values", 0) +
                                                        " - " + $("#robustnessSlider").slider("values", 1));
                                                });
                                            </script>
                                            <div id="robustnessSlider" style="margin: 0 20px;"></div>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                                <h4 class="sectionTitle">Habitat Preferences</h4>
                                <table id="habitat" style="width:100%">
                                    <tbody>
                                    <tr>
                                        <td style="width:25%; text-align: center;"><strong>System</strong>
                                            <select multiple id="preferedSystem"
                                                    title="Select any options to apply to query"
                                                    style="width:100%;overflow:overlay;" size="6">
                                                <option value="caves">Caves</option>
                                                <option value="springs">Springs</option>
                                                <option value="headwaters">Headwaters</option>
                                                <option value="creeks">Creeks</option>
                                                <option value="small_riv">Small Rivers</option>
                                                <option value="med_riv">Medium Rivers</option>
                                                <option value="lge_riv">Large Rivers</option>
                                                <option value="lk_imp_pnd">
                                                    Lakes/Impoundments
                                                </option>
                                                <option value="swp_msh_by">Swamp/Marsh</option>
                                                <option value="coast_ocea">Coastal/Ocean</option>
                                            </select>
                                        </td>
                                        <td class="noscroll" style="width:25%; text-align: center;"><strong>Water Position</strong>
                                            <select multiple id="waterPosition"
                                                    title="Select any options to apply to query"
                                                    style="width:100%;" size="6">
                                                <option value="benthic">Benthic</option>
                                                <option value="surface">Surface</option>
                                                <option  value="opnwtr_pelag">Open
                                                    Water/Pelagic
                                                </option>
                                                <option  value="nrshre_litt">
                                                    Nearshore/Littoral
                                                </option>
                                            </select>
                                        </td>
                                        <td class="noscroll" style="width:25%; text-align: center;"><strong>Substrate</strong>
                                            <select multiple id="substrate"
                                                    title="Select any options to apply to query"
                                                    style="width:100%;"
                                                    size="6">
                                                <option value="mud_slt_det">Mud/Silt</option>
                                                <option value="sand">Sand</option>
                                                <option value="gravel">Gravel</option>
                                                <option value="rck_rub_bol">Rocks/Rubble
                                                </option>
                                                <option value="vegetation">Vegetation</option>
                                                <option value="wdyd_brush">Woody Debris</option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="noscroll" style="width:25%; text-align: center;"><strong>Habitat Type</strong>
                                            <select multiple id="habitatType"
                                                    title="Select any options to apply to query"
                                                    style="width:100%;" size="3">
                                                <option value="riffles" title="Riffles">Riffles</option>
                                                <option value="run_flopool">Runs</option>
                                                <option value="pool_bckwtr">Pools/Backwater
                                                </option>
                                            </select>
                                        </td>
                                        <td class="noscroll" style="width:25%; text-align: center;"><strong>Water Clarity</strong>
                                            <select multiple id="waterType"
                                                    title="Select any options to apply to query"
                                                    style="width:100%;"
                                                    size="3">
                                                <option value="clearwater">Clear</option>
                                                <option value="turbidwater">Turbid</option>
                                            </select>
                                        </td>
                                        <td class="noscroll" style="width:25%; text-align: center;"><strong>Thermal Regime</strong>
                                            <select multiple id="thermal"
                                                    title="Select any options to apply to query"
                                                    style="width:100%;" size="3">
                                                <option value="coldwater">Cold</option>
                                                <option value="coolwater">Cool</option>
                                                <option value="warmwater">Warm</option>
                                            </select>
                                        </td>
                                        <td class="noscroll" style="width:25%; text-align: center;"><strong>Topography</strong>
                                            <select multiple id="topography"
                                                    title="Select any options to apply to query"
                                                    style="width:100%;" size="3">
                                                <option value="lowlands_lgr">Lowlands</option>
                                                <option value="uplands_hgr">Uplands</option>

                                            </select>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                                <div>
                                    <input id="submitQuery" name="submit" type="submit" value="Submit Query"
                                           onsubmit="return false;"/>
                                    <input id="resetQuery" name="resetQuery" type="reset" value="Reset Query"
                                           title="Reset all query parameter fields"/>
                                </div>
                                <p style="font-size:14px;">*Note: Use cntr + click to make multiple
                                    selections/deselections.</p>
                            </div>
                        </li>
                    </ul>

                    {#                    </ul><!-- END ACCORDIONS -->#}
                </form>
                <!--- line -->
                <hr/>
                <!--- submit query -->
                <tr>
                    <!--- reset -->
                </tr>
                <div id="queryParameters">
                    <h4 style="text-align:center;">Submitted Query Parameters</h4>
                    <div id="queryParameterTable"></div>
{#                    <table id="parameterTable" class="display" width="100%" title="Parameters used to generate query">#}
{#                        <thead>#}
{#                        <tr>#}
{#                            <th>Common Name</th>#}
{#                            <th>Scientific Name</th>#}
{#                            <th>Tribe</th>#}
{#                            <th>Biogeography</th>#}
{#                            <th>Beneficial Use</th>#}
{#                            <th>Tolerance</th>#}
{#                            <th>Rarity</th>#}
{#                            <th>Max Age (yr)</th>#}
{#                            <th>Mean Weight (g)</th>#}
{#                            <th>Mean Length (cm)</th>#}
{#                            <th>Max Length (cm)</th>#}
{#                            <th>System</th>#}
{#                            <th>Water Position</th>#}
{#                            <th>Substrate</th>#}
{#                            <th>Habitat</th>#}
{#                            <th>Water Clarity</th>#}
{#                            <th>Thermal Regime</th>#}
{#                            <th>Topography</th>#}
{#                        </tr>#}
{#                        </thead>#}
{#                    </table>#}
                </div>
                <div id="queryResults">
                    <h4 style="text-align:center;">Database Query Results</h4>
                    <div id="queryResultsTable">
                        <table id="resultsTable" width="100%" class="hover" title="Select fish for additional details">
                            <thead>
                            <tr>
                                <th>Common Name</th>
                                <th>Scientific Name</th>
                            </tr>
                            </thead>
                        </table>
                    </div>
                    <div id="fishDetailsTable">
                    </div>
                    <div style="float: right;width: 60%;">
                        <input id="saveQuery" name="save" type="submit" value="Save to CSV"
                               onsubmit="return false;" style="margin:0 25px 10px 50px;float: right;"/>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


</body>
</html>
